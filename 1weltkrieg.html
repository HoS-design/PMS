<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geschichte Komplett: WWI & NS-Zeit</title>
    <style>
        /* HoS-Style v7.0 (Massive Content Edition)
           - Styles für Tabellen, Zeitleisten und Experten-Boxen
           - Optimiert für große Textmengen
        */
        :root {
            --bg-body: #f4f6f8;
            --bg-paper: #ffffff;
            --text-main: #212529;
            --text-muted: #6c757d;
            --primary: #2c3e50; /* Dunkles Blau-Grau */
            --accent: #2980b9; /* Helles Blau */
            --highlight: #e67e22; /* Orange für Merksätze */
            --success: #27ae60;
            --error: #c0392b;
            --border-radius: 8px;
            --shadow: 0 4px 6px rgba(0,0,0,0.05);
            --font-main: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            --font-serif: 'Georgia', serif;
        }

        body {
            font-family: var(--font-main);
            background-color: var(--bg-body);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        /* --- HEADER --- */
        header {
            background: linear-gradient(135deg, var(--primary), #1a252f);
            color: white;
            padding: 40px 20px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        header h1 { margin: 0; font-size: 2.2rem; font-weight: 700; }
        header p { margin: 10px 0 0; font-size: 1.1rem; opacity: 0.8; font-family: var(--font-serif); font-style: italic; }

        /* --- NAV --- */
        nav {
            background: #fff;
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        .nav-btn {
            background: transparent;
            border: 2px solid transparent;
            padding: 10px 25px;
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-muted);
            cursor: pointer;
            border-radius: 25px;
            transition: all 0.2s;
        }
        .nav-btn:hover { background: #f8f9fa; color: var(--accent); }
        .nav-btn.active { background: var(--accent); color: white; box-shadow: 0 4px 10px rgba(41, 128, 185, 0.3); }

        /* --- CONTENT --- */
        main {
            max-width: 900px;
            margin: 40px auto;
            padding: 0 20px;
        }

        .section { display: none; animation: fadeIn 0.5s ease; }
        .section.active { display: block; }

        .chapter {
            background: var(--bg-paper);
            padding: 50px;
            margin-bottom: 40px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            border-left: 6px solid var(--accent);
        }

        .chapter h2 { color: var(--primary); font-size: 1.8rem; margin-top: 0; border-bottom: 2px solid #f1f1f1; padding-bottom: 15px; }
        .chapter h3 { color: var(--accent); font-size: 1.4rem; margin-top: 40px; margin-bottom: 20px; }
        .chapter h4 { color: var(--text-main); font-size: 1.1rem; font-weight: 700; margin-top: 25px; }

        /* Text Styles */
        p { font-size: 1.05rem; margin-bottom: 1.5rem; text-align: justify; }
        ul, ol { margin-bottom: 1.5rem; padding-left: 20px; }
        li { margin-bottom: 8px; font-size: 1.05rem; }

        /* Special Boxes */
        .highlight-box {
            background-color: #fff3cd;
            border: 1px solid #ffeeba;
            color: #856404;
            padding: 20px;
            border-radius: 8px;
            margin: 25px 0;
        }
        .highlight-box strong { display: block; margin-bottom: 5px; text-transform: uppercase; font-size: 0.9rem; }

        .deep-dive {
            background-color: #f1f8e9;
            border-left: 4px solid var(--success);
            padding: 20px;
            margin: 25px 0;
            font-size: 0.95rem;
        }
        .deep-dive-title { font-weight: bold; color: var(--success); display: block; margin-bottom: 5px; }

        /* Data Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
            font-size: 1rem;
        }
        .data-table th, .data-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
            vertical-align: top;
        }
        .data-table th { background-color: var(--primary); color: white; }
        .data-table tr:nth-child(even) { background-color: #f9f9f9; }

        /* Timeline List */
        .timeline-list { list-style: none; padding: 0; }
        .timeline-list li {
            position: relative;
            padding-left: 30px;
            margin-bottom: 20px;
            border-left: 3px solid #ddd;
        }
        .timeline-list li::before {
            content: ''; position: absolute; left: -9px; top: 5px;
            width: 15px; height: 15px; border-radius: 50%;
            background: var(--accent); border: 3px solid white;
        }
        .time-date { font-weight: bold; color: var(--accent); display: block; }

        /* SVG Containers */
        .graphic-wrapper {
            background: #fff; border: 1px solid #eee; padding: 20px;
            border-radius: 8px; margin: 30px 0; text-align: center;
        }
        .caption { display: block; font-size: 0.9rem; color: #999; margin-top: 10px; font-style: italic; }
        svg { max-width: 100%; height: auto; }

        /* --- QUIZ STYLES --- */
        .quiz-wrapper { background: white; padding: 40px; border-radius: 8px; box-shadow: var(--shadow); text-align: center; }
        .progress-cont { height: 10px; background: #eee; border-radius: 5px; margin-bottom: 30px; overflow: hidden; }
        .progress-val { height: 100%; background: var(--success); width: 0%; transition: width 0.3s; }
        
        .question-header { font-size: 1.3rem; font-weight: 700; color: var(--primary); margin-bottom: 30px; }
        
        .options-container { display: grid; gap: 15px; text-align: left; }
        .opt-btn {
            background: white; border: 2px solid #ddd; padding: 15px; border-radius: 8px;
            cursor: pointer; font-size: 1rem; transition: 0.2s;
        }
        .opt-btn:hover:not([disabled]) { border-color: var(--accent); background: #f0f8ff; }
        .opt-btn.correct { background: #d4edda; border-color: var(--success); color: #155724; }
        .opt-btn.wrong { background: #f8d7da; border-color: var(--error); color: #721c24; }

        /* Matching */
        .match-area { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; text-align: left; }
        .match-tile {
            padding: 15px; background: #fafafa; border: 2px solid #ddd; border-radius: 6px;
            cursor: pointer; font-size: 0.95rem;
        }
        .match-tile.selected { background: #cce5ff; border-color: var(--accent); }
        .match-tile.solved { background: #d4edda; border-color: var(--success); color: var(--success); cursor: default; opacity: 0.6; }

        .feedback { margin-top: 20px; padding: 15px; border-radius: 8px; display: none; text-align: left; background: #eee; }
        .next-btn {
            background: var(--primary); color: white; border: none; padding: 12px 40px;
            border-radius: 25px; font-size: 1rem; cursor: pointer; margin-top: 20px; display: none;
        }

        /* Footer */
        footer { margin-top: 50px; text-align: center; padding: 30px; color: #aaa; border-top: 1px solid #eee; }
        .footer-meme { height: 25px; vertical-align: middle; opacity: 0.4; margin-left: 10px; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        @media (max-width: 700px) {
            .match-area { grid-template-columns: 1fr; }
            .chapter { padding: 25px; }
        }
    </style>
</head>
<body>

<header>
    <h1>Geschichte Komplett</h1>
    <p>Lehrbuch & Prüfungsvorbereitung (Klasse 4)</p>
</header>

<nav>
    <button class="nav-btn active" onclick="switchTab('learn')">Schulbuch</button>
    <button class="nav-btn" onclick="switchTab('quiz')">Prüfung</button>
</nav>

<main>

    <div id="learn-tab" class="section active">
        
        <div class="chapter">
            <h2>I. Der Erste Weltkrieg (1914–1918)</h2>
            
            <h3>1. Ursachen und Ausbruch</h3>
            <p>Der Ausbruch des Krieges war kein Zufall, sondern das Ergebnis eines angespannten Europas. Imperialismus (Streben nach Macht und Kolonien) und Nationalismus heizten die Stimmung an.</p>
            
            <div class="highlight-box">
                <strong>Der Auslöser (28. Juni 1914)</strong>
                Das Attentat von Sarajevo: Der serbische Nationalist Gavrilo Princip erschoss den österreichischen Thronfolger Franz Ferdinand und seine Frau Sophie. Dies löste die "Julikrise" aus.
            </div>

            <p>Aufgrund der starren Bündnissysteme führte die Kriegserklärung Österreich-Ungarns an Serbien zu einer unaufhaltsamen Kettenreaktion:</p>
            
            <div class="graphic-wrapper">
                <svg viewBox="0 0 600 150">
                    <rect x="10" y="20" width="200" height="110" rx="10" fill="#fff5f5" stroke="#c0392b" stroke-width="2"/>
                    <text x="110" y="50" text-anchor="middle" font-weight="bold" fill="#c0392b" font-family="sans-serif">MITTELMÄCHTE</text>
                    <text x="110" y="80" text-anchor="middle" font-family="sans-serif">Deutschland</text>
                    <text x="110" y="100" text-anchor="middle" font-family="sans-serif">Österreich-Ungarn</text>
                    
                    <text x="300" y="85" text-anchor="middle" font-weight="bold" font-size="20">VS.</text>
                    
                    <rect x="390" y="20" width="200" height="110" rx="10" fill="#e3f2fd" stroke="#2980b9" stroke-width="2"/>
                    <text x="490" y="50" text-anchor="middle" font-weight="bold" fill="#2980b9" font-family="sans-serif">ENTENTE</text>
                    <text x="490" y="80" text-anchor="middle" font-family="sans-serif">Frankreich & GB</text>
                    <text x="490" y="100" text-anchor="middle" font-family="sans-serif">Russland (bis 1917)</text>
                    <text x="490" y="120" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#666">USA (ab 1917)</text>
                </svg>
                <span class="caption">Abb. 1: Die verfeindeten Blöcke in Europa.</span>
            </div>

            <h3>2. Verlauf und Schrecken an der Front</h3>
            <p>Der Krieg entwickelte sich anders als geplant. Der deutsche "Schlieffen-Plan" (schneller Sieg über Frankreich) scheiterte. Es kam zum jahrelangen <strong>Stellungskrieg</strong> in Schützengräben.</p>
            
            <ul class="timeline-list">
                <li>
                    <span class="time-date">1914</span>
                    Kriegsausbruch und Scheitern des Bewegungskrieges im Westen.
                </li>
                <li>
                    <span class="time-date">1915</span>
                    Erster Einsatz von Giftgas bei Ypern (Belgien). U-Boot-Krieg beginnt.
                </li>
                <li>
                    <span class="time-date">1916</span>
                    "Hölle von Verdun": Hunderttausende sterben für minimale Geländegewinne.
                </li>
                <li>
                    <span class="time-date">1917 (Wendejahr)</span>
                    <strong>USA:</strong> Treten in den Krieg ein und stärken die Entente.<br>
                    <strong>Russland:</strong> Scheidet durch die Revolution aus dem Krieg aus.
                </li>
            </ul>

            <div class="deep-dive">
                <span class="deep-dive-title">Vertiefung: Geheimverhandlungen 1917</span>
                Kaiser Karl I. von Österreich versuchte 1917, geheime Friedensgespräche mit Frankreich zu führen (über seinen Schwager Sixtus). Diese Gespräche scheiterten jedoch und wurden öffentlich bekannt, was Karls Ansehen massiv schadete.
            </div>

            <h3>3. Das bittere Ende 1918</h3>
            <p>Nicht nur an der Front, auch an der "Heimatfront" brach alles zusammen. Durch die britische Seeblockade herrschte Hunger. Im <strong>Steckrübenwinter 1916/17</strong> starben Zehntausende Zivilisten.</p>
            <p>Im November 1918 kapitulierten die Mittelmächte. Die Kaiser mussten abdanken. Europa wurde neu geordnet (Zerfall Österreich-Ungarns in Nationalstaaten wie Tschechoslowakei, Ungarn, etc.).</p>
        </div>

        <div class="chapter">
            <h2>II. Die Weimarer Republik & Der Aufstieg Hitlers</h2>
            
            <h3>1. Die Last von Versailles</h3>
            <p>Die erste deutsche Demokratie (Weimarer Republik) hatte einen schweren Start. Der <strong>Versailler Vertrag (1919)</strong> legte fest:</p>
            <ul>
                <li>Deutschland trägt die <strong>alleinige Kriegsschuld</strong> (Art. 231).</li>
                <li>Hohe Reparationszahlungen an die Sieger.</li>
                <li>Gebietsverluste (ca. 13% der Fläche).</li>
            </ul>
            
            <div class="deep-dive">
                <span class="deep-dive-title">Die Dolchstoßlegende</span>
                Rechte Politiker und Militärs (wie Hindenburg) verbreiteten die Lüge, das deutsche Heer sei "im Felde unbesiegt" gewesen und nur durch einen "Dolchstoß" der Heimat (durch Sozialisten und Juden) verraten worden. Das war falsch, aber viele glaubten es und hassten die Demokratie dafür.
            </div>

            <h3>2. Krisenjahr 1923 & "Goldene Zwanziger"</h3>
            <p>1923 kam es zur <strong>Hyperinflation</strong>. Geld wurde wertlos, Menschen bezahlten Brot mit Milliarden-Scheinen. In diesem Chaos versuchte Adolf Hitler in München einen Putsch, der scheiterte. Er kam in Haft und schrieb dort sein Buch "Mein Kampf".</p>
            <p>Danach erholte sich Deutschland kurz ("Goldene Zwanziger"), bis 1929 die <strong>Weltwirtschaftskrise</strong> (Börsencrash New York) alles zerstörte. Arbeitslosigkeit und Elend trieben die Wähler zur NSDAP.</p>
        </div>

        <div class="chapter">
            <h2>III. Faschismus und Nationalsozialismus im Vergleich</h2>
            <p>Benito Mussolini (Italien) und Adolf Hitler (Deutschland) errichteten Diktaturen. Doch wo liegen die Unterschiede? Deine Unterlagen zeigen folgenden Vergleich:</p>

            <table class="data-table">
                <thead>
                    <tr>
                        <th style="width: 50%;">Gemeinsamkeiten (Faschismus & NS)</th>
                        <th style="width: 50%;">Unterschiede (Spezifisch NS)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <strong>Führerkult:</strong> Alles auf eine Person ausgerichtet.<br><br>
                            <strong>Keine Demokratie:</strong> Parlament entmachtet.<br><br>
                            <strong>Gewalt & Terror:</strong> Gegen Andersdenkende.<br><br>
                            <strong>Propaganda:</strong> Massenbeeinflussung (Radio).
                        </td>
                        <td>
                            <strong>Rassenideologie:</strong> Biologisch begründeter Rassismus.<br><br>
                            <strong>Antisemitismus:</strong> Radikaler Hass auf Juden als zentrales politisches Ziel.<br><br>
                            <strong>Lebensraum:</strong> Vernichtungskrieg im Osten.
                        </td>
                    </tr>
                </tbody>
            </table>

            <div class="graphic-wrapper">
                <svg viewBox="0 0 500 250">
                    <polygon points="50,230 450,230 250,20" fill="#34495e"/>
                    <line x1="150" y1="125" x2="350" y2="125" stroke="white" stroke-width="2"/>
                    <text x="250" y="70" text-anchor="middle" fill="white" font-weight="bold" font-family="sans-serif">DER FÜHRER</text>
                    <text x="250" y="110" text-anchor="middle" fill="white" font-size="12" font-family="sans-serif">SS / SA / Partei</text>
                    <text x="250" y="180" text-anchor="middle" fill="white" font-weight="bold" font-family="sans-serif">VOLKSGEMEINSCHAFT</text>
                    <text x="50" y="130" fill="#c0392b" font-weight="bold" font-family="sans-serif">BEFEHL ▼</text>
                    <text x="450" y="130" text-anchor="end" fill="#c0392b" font-weight="bold" font-family="sans-serif">GEHORSAM ▲</text>
                </svg>
                <span class="caption">Abb. 2: Das Führerprinzip in der Diktatur.</span>
            </div>

            <h3>Hitlers Weg zur Macht (Biografie)</h3>
            <ul>
                <li><strong>1889:</strong> Geboren in Braunau am Inn (Österreich).</li>
                <li><strong>1914–1918:</strong> Soldat im Ersten Weltkrieg (wird sein prägendes Erlebnis).</li>
                <li><strong>1923:</strong> Gescheiterter Hitler-Putsch in München.</li>
                <li><strong>1933:</strong> Ernennung zum <strong>Reichskanzler</strong> durch Hindenburg.</li>
                <li><strong>1934:</strong> Tod Hindenburgs. Hitler vereinigt die Ämter zum "Führer und Reichskanzler".</li>
            </ul>
        </div>
    </div>

    <div id="quiz-tab" class="section">
        <div class="quiz-wrapper">
            <div id="quiz-intro">
                <h2>Große Abschlussprüfung</h2>
                <p>Umfassender Test über alle Kapitel.</p>
                <ul style="display:inline-block; text-align:left; color:#666; margin: 20px 0;">
                    <li>20 Fragen im Pool</li>
                    <li>Zufallsgenerator</li>
                    <li>Multiple Choice & Zuordnung</li>
                </ul>
                <br>
                <button class="nav-btn" style="background:var(--primary); color:white; border:none;" onclick="startQuiz()">Prüfung starten</button>
            </div>

            <div id="quiz-active" style="display:none;">
                <div class="progress-cont"><div id="progress-bar" class="progress-val"></div></div>
                <div id="question-container"></div>
                <div id="feedback" class="feedback"></div>
                <button id="next-btn" class="next-btn" onclick="nextQuestion()">Nächste Frage</button>
            </div>

            <div id="quiz-result" style="display:none;">
                <h2>Dein Ergebnis</h2>
                <div style="font-size:3.5rem; color:var(--accent); font-weight:bold; margin:20px 0;" id="score-display">0%</div>
                <img src="chatisthisreal.png" id="meme-reward" style="max-width:200px; display:none; margin:0 auto; border-radius:8px;">
                <p id="result-msg"></p>
                <button class="nav-btn" style="background:var(--primary); color:white;" onclick="location.reload()">Neustarten</button>
            </div>
        </div>
    </div>

</main>

<footer>
    <div>HoS Education Suite v7.0 | Massive Content Edition</div>
    <img src="chatisthisreal.png" class="footer-meme" title="Real?">
</footer>

<script>
    /* DATENBANK (ERWEITERT) */
    const pool = [
        // WWI
        {t:'mc', q:"Was war der Auslöser der 'Julikrise' 1914?", o:["Einmarsch in Polen","Attentat von Sarajevo","Bau der Berliner Mauer","Untergang der Titanic"], c:1, i:"Das Attentat auf Franz Ferdinand war der Funke."},
        {t:'mc', q:"Was ist typisch für den Stellungskrieg?", o:["Schnelle Panzerbewegungen","Kaum Frontverschiebung, Schützengräben","Reiner Luftkrieg","Friedliche Verhandlungen"], c:1, i:"Die Fronten erstarrten über Jahre."},
        {t:'mc', q:"Wann trat die USA in den Krieg ein?", o:["1914","1915","1917","1918"], c:2, i:"1917 war das Wendejahr (USA rein, Russland raus)."},
        {t:'mc', q:"Was bedeutet 'Steckrübenwinter'?", o:["Ein Festessen","Hungersnot 1916/17","Eine neue Waffe","Ein Kältewelle"], c:1, i:"Wegen der Blockade gab es nur noch Steckrüben zu essen."},
        {t:'mc', q:"Wie viele Soldaten starben etwa im 1. Weltkrieg?", o:["1 Million","10 Millionen","100.000","50 Millionen"], c:1, i:"Ca. 10 Mio. Soldaten und 7 Mio. Zivilisten."},
        
        // Weimar & NS
        {t:'mc', q:"Was besagte Artikel 231 des Versailler Vertrags?", o:["Deutschland hat die Alleinschuld","Österreich darf sich anschließen","Gründung der EU","Einführung des Euro"], c:0, i:"Die Alleinschuld war Grundlage für Reparationen."},
        {t:'mc', q:"Was geschah im Krisenjahr 1923 NICHT?", o:["Hyperinflation","Hitler-Putsch","Besetzung des Ruhrgebiets","Beginn des 2. Weltkriegs"], c:3, i:"1923 war das Krisenjahr der Republik, nicht Kriegsbeginn."},
        {t:'mc', q:"Welches Ereignis beendete die 'Goldenen Zwanziger'?", o:["Börsencrash New York 1929","Wahl Hitlers","Kriegsende","Mauerfall"], c:0, i:"Die Weltwirtschaftskrise stürzte Deutschland ins Elend."},
        {t:'mc', q:"Wie kam Hitler an die Macht?", o:["Durch blutigen Putsch","Ernennung zum Kanzler durch Hindenburg","Militärputsch","Wahlfälschung"], c:1, i:"Es war eine legale Ernennung am 30. Januar 1933."},
        
        // Unterschiede & Begriffe
        {t:'mc', q:"Was unterscheidet den NS vom Faschismus?", o:["Führerkult","Gewalt","Antisemitismus/Rassismus","Propaganda"], c:2, i:"Der biologische Rassismus ist spezifisch für die Nazis."},
        {t:'mc', q:"Was war der 'Volksempfänger'?", o:["Ein Orden","Ein billiges Radio für Propaganda","Ein Parteiamt","Eine Waffe"], c:1, i:"Damit kam Hitlers Stimme in jedes Wohnzimmer."},

        // Matching
        {t:'match', q:"Ordne die Jahre zu!", p:[{l:"1914",r:"Kriegsbeginn"},{l:"1917",r:"Kriegseintritt USA"},{l:"1918",r:"Kriegsende"},{l:"1933",r:"Hitler wird Kanzler"}], i:"Wichtige Daten der Geschichte."},
        {t:'match', q:"Begriffe verbinden", p:[{l:"Heimatfront",r:"Leiden der Zivilisten"},{l:"Entente",r:"Bündnis F, GB, RUS"},{l:"Versailles",r:"Friedensvertrag"},{l:"Dolchstoß",r:"Legende vom Verrat"}], i:"Zentrale Begriffe verstanden."}
    ];

    let questions=[], current=0, score=0, sel=null;

    function switchTab(id) {
        document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
        document.getElementById(id+'-tab').classList.add('active');
        // Button highlight logic simplified
        if(id==='learn') document.querySelector('button[onclick="switchTab(\'learn\')"]').classList.add('active');
        else document.querySelector('button[onclick="switchTab(\'quiz\')"]').classList.add('active');
        window.scrollTo(0,0);
    }

    function startQuiz() {
        questions = [...pool].sort(()=>Math.random()-0.5).slice(0, 10);
        current=0; score=0;
        document.getElementById('quiz-intro').style.display='none';
        document.getElementById('quiz-result').style.display='none';
        document.getElementById('quiz-active').style.display='block';
        loadQ();
    }

    function loadQ() {
        const q = questions[current];
        const cont = document.getElementById('question-container');
        cont.innerHTML = `<div class="question-header">Frage ${current+1}: ${q.q}</div>`;
        document.getElementById('feedback').style.display='none';
        document.getElementById('next-btn').style.display='none';
        document.getElementById('progress-bar').style.width = `${(current/questions.length)*100}%`;

        if(q.t==='mc') {
            const grid = document.createElement('div'); grid.className='options-container';
            q.o.forEach((opt,i)=>{
                const b=document.createElement('div'); b.className='opt-btn'; b.textContent=opt;
                b.onclick=()=>checkMC(b,i,q); grid.appendChild(b);
            });
            cont.appendChild(grid);
        } else {
            const grid = document.createElement('div'); grid.className='match-area';
            let l=q.p.map((x,i)=>({t:x.l,id:i,s:'l'})), r=q.p.map((x,i)=>({t:x.r,id:i,s:'r'}));
            [l,r].forEach(arr=>{
                const col=document.createElement('div'); col.style.display='grid'; col.style.gap='10px';
                arr.sort(()=>Math.random()-0.5).forEach(item=>{
                    const b=document.createElement('div'); b.className='match-tile'; b.textContent=item.t;
                    b.onclick=()=>checkMatch(b,item,q); col.appendChild(b);
                });
                grid.appendChild(col);
            });
            cont.appendChild(grid); q._matches=0; sel=null;
        }
    }

    function checkMC(btn,i,q) {
        document.querySelectorAll('.opt-btn').forEach(b=>b.style.pointerEvents='none');
        const fb=document.getElementById('feedback'); fb.style.display='block';
        if(i===q.c) { btn.classList.add('correct'); score++; fb.innerHTML="<strong>Richtig!</strong> "+q.i; fb.style.background='#d4edda'; color='#155724'; }
        else { btn.classList.add('wrong'); fb.innerHTML="<strong>Falsch.</strong> "+q.i; fb.style.background='#f8d7da'; color='#721c24'; }
        document.getElementById('next-btn').style.display='inline-block';
    }

    function checkMatch(tile,item,q) {
        if(tile.classList.contains('solved')) return;
        if(!sel) { sel={tile,item}; tile.classList.add('selected'); }
        else {
            if(sel.item.s!==item.s && sel.item.id===item.id) {
                tile.classList.add('solved'); sel.tile.classList.remove('selected'); sel.tile.classList.add('solved');
                q._matches++; sel=null;
                if(q._matches===q.p.length) {
                    score++; const fb=document.getElementById('feedback'); fb.style.display='block';
                    fb.innerHTML="<strong>Perfekt gelöst!</strong> "+q.i; fb.style.background='#d4edda';
                    document.getElementById('next-btn').style.display='inline-block';
                }
            } else { sel.tile.classList.remove('selected'); sel=null; }
        }
    }

    function nextQuestion() {
        current++; if(current<questions.length) loadQ(); else showRes();
    }

    function showRes() {
        document.getElementById('quiz-active').style.display='none';
        document.getElementById('quiz-result').style.display='block';
        const pct=Math.round((score/questions.length)*100);
        document.getElementById('score-display').textContent=pct+'%';
        const img=document.getElementById('meme-reward');
        if(pct===100) { img.style.display='block'; document.getElementById('result-msg').textContent="Hervorragend!"; }
        else { img.style.display='none'; document.getElementById('result-msg').textContent="Übung macht den Meister."; }
    }
</script>

</body>
</html>
