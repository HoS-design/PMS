<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<title>Durchgesch√ºttelt ‚Äì Fremdw√∂rter</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
      --subject-color:#ef4444;
  --bg:#f2f4f7;
  --surface:#ffffff;
  --ink:#1e293b;
  --muted:#64748b;
  --line:#e2e8f0;
  --accent:#3b82f6;
  --accent-soft:#eff6ff;
  --ok:#10b981;
  --bad:#ef4444;
  --card:var(--surface);
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  background:var(--bg);
  color:var(--ink);
}

main{
  max-width:720px;
  margin:0 auto;
  padding:24px;
}

header{
  margin-bottom:20px;
}
header h1{
  margin:0;
  font-size:1.6rem;
}
header p{
  margin:6px 0 0;
  color:var(--muted);
}

.card{
  background:var(--card);
  border-radius:14px;
  padding:20px;
  border:1px solid var(--line);
  box-shadow:0 10px 30px rgba(0,0,0,.06);
}

.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:14px;
  font-size:.9rem;
  color:var(--muted);
  gap:12px;
}

.progress{
  margin-bottom:12px;
  height:8px;
  background:var(--line);
  border-radius:999px;
  overflow:hidden;
}
.progress div{
  height:100%;
  width:0%;
  background:var(--accent);
  transition:.3s;
}

.meaning{
  padding:14px;
  border-left:4px solid var(--accent);
  background:var(--accent-soft);
  margin-bottom:16px;
}

.letters, .slots{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin-bottom:14px;
}

.slot, .tile{
  min-width:38px;
  padding:8px 10px;
  text-align:center;
  border-radius:10px;
  font-weight:600;
  user-select:none;
}

.tile{
  background:var(--line);
  cursor:grab;
}

.slot{
  background:var(--surface);
  border:2px dashed var(--line);
}

.controls{
  display:flex;
  gap:10px;
  margin-top:10px;
}

button{
  flex:1;
  padding:10px;
  border:1px solid var(--accent);
  border-radius:10px;
  background:var(--accent);
  color:white;
  font-size:.95rem;
  cursor:pointer;
}
button.secondary{
  background:#e5e7eb;
  color:var(--ink);
}

.feedback{
  margin-top:12px;
  font-weight:500;
}
.feedback.ok{color:var(--ok)}
.feedback.bad{color:var(--bad)}

footer{
  margin-top:24px;
  text-align:center;
  color:var(--muted);
  font-size:.8rem;
}

    .app-header {
      padding: 12px 24px;
      background: var(--surface);
      border-bottom: 1px solid var(--line);
      display: flex;
      align-items: center;
      justify-content: flex-start;
      gap: 12px;
      box-shadow: var(--shadow-md, 0 4px 6px -1px rgba(0,0,0,0.08), 0 2px 4px -1px rgba(0,0,0,0.04));
    }
    .app-header .brand-row { display:flex; align-items:center; gap:12px; }
    .app-header .logo-img { width:44px; height:44px; object-fit:contain; border-radius:10px; background:var(--bg); border:1px solid var(--line); }
    .app-header .badge-main {
      display:inline-flex; align-items:center;
      background: var(--subject-color);
      color: white;
      font-size:10px; font-weight:700; text-transform:uppercase; letter-spacing:0.5px;
      padding:3px 8px; border-radius:99px;
    }

</style>
</head>

<body>

<header class="app-header">
  <div class="brand-row">
    <img src="chatisthisreal.png" alt="Logo" class="logo-img" onerror="this.style.display='none'">
    <div class="badge-main">Deutsch</div>
  </div>
</header>

<main>

<header>
  <h1>Durchgesch√ºttelt ‚Äì Fremdw√∂rter</h1>
  <p>Ordne die Buchstaben so, dass sie zur Bedeutung passen.</p>
</header>

<div class="card" id="game"></div>

<footer>
  HoS ¬∑ Deutsch ¬∑ Sprachbetrachtung
</footer>

</main>

<script>
const stages = [
  {
    name:"Stufe 1",
    words:[
      ["APPARAT","technisches Ger√§t"],
      ["KONFERENZ","Sitzung, Besprechung"],
      ["LIMONADE","alkoholfreies Erfrischungsgetr√§nk"],
      ["DEMONSTRATION","politische Veranstaltung, Protestmarsch"],
      ["UNIVERSIT√ÑT","Hochschule"],
      ["INGENIEUR","Experte auf technischem Gebiet"],
      ["CHARAKTER","Pers√∂nlichkeit, Wesensart"],
      ["TEMPERATUR","W√§rmegrad"],
      ["KAFFEE","schwarzes koffeinhaltiges Hei√ügetr√§nk"],
      ["TELEFON","Fernsprechapparat"]
    ]
  },
  {
    name:"Stufe 2",
    words:[
      ["VISUM","Einreiseerlaubnis"],
      ["ELEKTRIZIT√ÑT","Naturph√§nomen geladener Teilchen"],
      ["ENERGIE","Tatkraft"],
      ["SYSTEM","Struktur, Organisation"],
      ["ILLUSTRIERTE","bebilderte Zeitschrift"],
      ["THEATER","Schauspielhaus"],
      ["KORREKTUR","Berichtigung"],
      ["ARZT","Mediziner"],
      ["ZIGARRE","Tabakware"],
      ["KAPUTT","besch√§digt, nicht mehr funktionierend"]
    ]
  },
  {
    name:"Stufe 3",
    words:[
      ["ORGANISATION","geordnetes Zusammenwirken"],
      ["STRUKTUR","innerer Aufbau"],
      ["METHODE","systematisches Vorgehen"],
      ["INSTITUTION","dauerhafte Einrichtung"],
      ["KOMMUNIKATION","Austausch von Informationen"],
      ["INTERPRETATION","Deutung"],
      ["INTEGRATION","Eingliederung"],
      ["QUALIFIKATION","Fachliche Eignung"],
      ["ADMINISTRATION","Verwaltung"],
      ["INFRASTRUKTUR","grundlegende Einrichtungen"]
    ]
  }
];

let stage=0, index=0, solved=0;
const game=document.getElementById("game");

// -------- Timer (nur Stufe 2) --------
let timer = 0;
let timerInterval = null;

function startTimer(){
  stopTimer();
  timer = 0;
  timerInterval = setInterval(()=>{
    timer++;
    const t = document.getElementById("timer");
    if(t) t.textContent = timer;
  },1000);
}

function stopTimer(){
  if(timerInterval){
    clearInterval(timerInterval);
    timerInterval = null;
  }
}

// -------- Helpers --------
function shuffle(a){
  return [...a].sort(()=>Math.random()-0.5);
}

// Stufe 3: "fast richtig" (2 Buchstaben tauschen)
function almostCorrect(word){
  const a = word.split("");
  if(a.length < 4) return shuffle(a);

  const i = Math.floor(Math.random()*(a.length-1));
  let j = i+1;

  if(a.length >= 6 && Math.random() < 0.6){
    j = Math.min(a.length-1, i + 2 + Math.floor(Math.random()*3));
  }
  [a[i], a[j]] = [a[j], a[i]];

  if(a.join("") === word){
    const k = (i+1) % a.length;
    const l = (j+1) % a.length;
    [a[k], a[l]] = [a[l], a[k]];
  }
  return a;
}

function render(){
  const [word,meaning]=stages[stage].words[index];

  // Stufe 3 (stage === 2) = fast richtig, sonst shuffle
  const letters = (stage === 2) ? almostCorrect(word) : shuffle(word.split(""));

  game.innerHTML=`
    <div class="topbar">
      <div>${stages[stage].name}</div>
      <div>
        ${stage === 1 ? '‚è± <span id="timer">0</span>s ¬∑ ' : ''}
        ${index+1} / 10
      </div>
    </div>
    <div class="progress"><div style="width:${(index/10)*100}%"></div></div>
    <div class="meaning">${meaning}</div>
    <div class="slots">${word.split("").map(()=>`<div class="slot"></div>`).join("")}</div>
    <div class="letters">${letters.map(l=>`<div class="tile" draggable="true">${l}</div>`).join("")}</div>
    <div class="controls">
      <button class="secondary" onclick="render()">Zur√ºcksetzen</button>
      <button onclick="check('${word}')">Pr√ºfen</button>
    </div>
    <div class="feedback" id="fb"></div>
  `;

  // Timer nur in Stufe 2
  if(stage === 1){
    startTimer();
  }else{
    stopTimer();
  }

  enableDnD();
}

function enableDnD(){
  const tiles = document.querySelectorAll(".tile");
  const slots = [...document.querySelectorAll(".slot")];
  const lettersBox = document.querySelector(".letters");

  const nextFreeSlot = () => slots.find(s => !s.firstChild);

  tiles.forEach((t, i) => {
    if(!t.id) t.id = "tile_" + i + "_" + Math.random().toString(16).slice(2);

    t.addEventListener("dragstart", (e) => {
      e.dataTransfer.setData("text/tileId", t.id);
    });

    // Klick unten: ins n√§chste freie Feld
    t.addEventListener("click", () => {
      if(!lettersBox.contains(t)) return; // nur wenn unten
      const free = nextFreeSlot();
      if(!free) return;
      free.appendChild(t);
      t.style.cursor = "default";
    });
  });

  slots.forEach((s) => {
    s.addEventListener("dragover", (e) => e.preventDefault());

    s.addEventListener("drop", (e) => {
      e.preventDefault();
      if(s.firstChild) return;

      const tileId = e.dataTransfer.getData("text/tileId");
      const tileEl = document.getElementById(tileId);
      if(!tileEl) return;

      // Tile wird verschoben -> verschwindet unten
      s.appendChild(tileEl);
      tileEl.style.cursor = "default";
    });

    // Klick auf Slot: Buchstabe zur√ºck nach unten
    s.addEventListener("click", () => {
      if(!s.firstChild) return;
      const tileEl = s.firstChild;
      lettersBox.appendChild(tileEl);
      tileEl.style.cursor = "grab";
    });
  });
}

// check: Slot-Inhalt aus childNodes lesen
function check(word){
  const guess=[...document.querySelectorAll(".slot")].map(s=>{
    return s.firstChild ? s.firstChild.textContent : "";
  }).join("");

  const fb=document.getElementById("fb");
  if(guess===word){
    fb.textContent="Sicher erkannt.";
    fb.className="feedback ok";
    solved++;
    setTimeout(next,800);
  }else{
    fb.textContent="Fast ‚Äì √ºberpr√ºfe die Reihenfolge.";
    fb.className="feedback bad";
  }
}

function next(){
  // Timer beim Wortwechsel kurz stoppen (render() startet ggf. neu)
  stopTimer();

  index++;
  if(index>=10){
    stage++;
    index=0;
    if(stage>=stages.length){
      game.innerHTML=`<h2>Fertig üéì</h2>
      <p>Du hast ${solved} von 30 Fremdw√∂rtern sicher erkannt.</p>`;
      return;
    }
  }
  render();
}

render();
</script>
</body>
</html>
